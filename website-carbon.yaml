openapi: 3.0.0
info:
  title: Carbon Emissions API
  version: 1.0.0
  description: |
    An API for calculating carbon emissions generated by website visits
    The statistics object is returned in both endpoints and contains the following information - 
    adjustedBytes - The approximate number of bytes transferred by the page load, adjusted to take first time vs returning visitor percentage into account.
        
    energy - The approximate amount of energy transferred on each page load in KWg.
    
    co2 - An object containing data on the amount of CO2 transferred on each page load. This is often offered as two separate options, renewable and grid. These relate to whether the energy is renewable or from the national grid respectively; you should use one or the other.
    
    The value of both the renewable and grid options is an object:
    
    grams - The approximate amount of CO2 transferred on each page load in grams
    
    litres - The approximate amount of CO2 transferred on each page load in litres
servers:
  - url: https://api.websitecarbon.com
paths:
  /site:
    get:
      summary: Calculate carbon emissions for a given URL
      description: |
        This endpoint runs a test in real time to calculate the carbon emissions generated per page view for a given URL.
        The endpoint is cached and will only test the same URL once every 24 hours.
        
        The response contains the following information -
        
        url - The URL that has been tested.

        In some cases this may differ from the URL you've provided, e.g. in the case of a redirect, or if it contains disallowed parameters.
        
        green - boolean Whether or not we could establish hosting of the website as being "green".
        We work with The Green Web Foundation to get this information.
        If the green hosting status can't be established this will return a string with a value of unknown.
        
        bytes - integer
        The number of bytes transferred during the page load.
        
        cleanerThan - number
        A numeric value between 0 and 1 representing the percentage of tested resources this is cleaner than. This is based on the CO2 value
        

      parameters:
        - name: url
          in: query
          description: |
            The URL of the page to test. The URL of the page you want to test.

            The URL should have the protocol included, and be URL encoded.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /data:
    get:
      summary: Calculate carbon emissions for a given amount of data
      description: |
        This endpoint calculates the carbon emissions generated by a website visit for a given amount of data, based on whether or not it is powered by green hosting.
        
        The response contains the following information -
        
        cleanerThan - number
        A numeric value between 0 and 1 representing the percentage of tested resources this is cleaner than. This is based on the CO2 value
        

      parameters:
        - name: bytes
          in: query
          description: The number of bytes transferred by the page on load
          required: true
          schema:
            type: integer
        - name: green
          in: query
          description: Whether the site is using environmentally sustainable hosting
          required: true
          schema:
            type: integer
            enum: [0, 1]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  energy:
                    type: number
                    description: The approximate amount of energy transferred on each page load in KWg.
                  co2:
                    type: object
                    description: An object containing data on the amount of CO2 transferred on each page load
                    properties:
                      renewable:
                        type: object
                        properties:
                          grams:
                            type: number
                            description: The approximate amount of CO2 transferred on each page load in grams using renewable energy
                          litres:
                            type: number
                            description: The approximate amount of CO2 transferred on each page load in litres using renewable energy
                      grid:
                        type: object
                        properties:
                          grams:
                            type: number
                            description: The approximate amount of CO2 transferred on each page load in grams using energy from the
